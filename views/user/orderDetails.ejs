<!DOCTYPE html>
<html class="no-js" lang="zxx">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Watch shop | eCommers</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="manifest" href="site.webmanifest" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="user_assets/img/favicon.ico"
    />

    <!-- CSS here -->
    <link rel="stylesheet" href="/user_assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/user_assets/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="/user_assets/css/flaticon.css" />
    <link rel="stylesheet" href="/user_assets/css/slicknav.css" />
    <link rel="stylesheet" href="/user_assets/css/animate.min.css" />
    <link rel="stylesheet" href="/user_assets/css/magnific-popup.css" />
    <link rel="stylesheet" href="/user_assets/css/fontawesome-all.min.css" />
    <link rel="stylesheet" href="/user_assets/css/themify-icons.css" />
    <link rel="stylesheet" href="/user_assets/css/slick.css" />
    <link rel="stylesheet" href="/user_assets/css/nice-select.css" />
    <link rel="stylesheet" href="/user_assets/css/style.css" />
  </head>

  <body>
   
    <header>
      <!-- Header Start -->
      <div class="header-area">
        <div class="main-header header-sticky">
          <div class="container-fluid">
            <div class="menu-wrapper">
              <!-- Logo -->
              <div class="logo">
                <a href="index.html"
                  ><img src="user_assets/img/logo/logo.png" alt=""
                /></a>
              </div>
              <!-- Main-menu -->
              <div class="main-menu d-none d-lg-block">
                <nav>
                  <ul id="navigation">
                    <li><a href="/">Home</a></li>

                    <!-- <li><a href="about.html">about</a></li> -->
                    <li class="hot">
                      <a href="/shop">shop</a>
                    </li>
                    <li>
                      <a href="#">Category</a>
                      <ul class="submenu">
                        <% categories.filter(category => category.status !==
                        false).forEach(category => { %>
                        <a
                          class="dropdown-item"
                          href="/shop?category=<%= category._id %>"
                        >
                          <%= category.name %>
                        </a>
                        <% }); %>
                      </ul>
                    </li>
                    <li><a href="contact.html">Contact</a></li>
                  </ul>
                </nav>
              </div>
              <!-- Header Right -->
              <div class="header-right">
                <ul>
                  <li>
                    <div class="search-bar">
                      <form action="/searchProducts" method="post">
                        <input
                          name="searchProducts"
                          type="text"
                          class="search-input"
                          placeholder="Search..."
                        />
                        <button class="search-button">
                          <img
                            src="/user_assets/img/adapt_icon/search-50.png"
                            style="height: 20px"
                          />
                        </button>
                      </form>
                    </div>
                  </li>
                  <li>
                    <a href="/profile"><span class="flaticon-user"></span></a>
                  </li>
                  <li>
                    <a href="/favouritespage">
                      <span class="flaticon-heart"></span
                    ></a>
                  </li>
                  <li>
                    <a href="/cartpage"
                      ><span class="flaticon-shopping-cart"></span
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
            <!-- Mobile Menu -->
            <div class="col-12">
              <div class="mobile_menu d-block d-lg-none"></div>
            </div>
          </div>
        </div>
      </div>
      <!-- Header End -->
    </header>

    <div style="margin-bottom: 1px" class="hero" style="margin-bottom: 1px">
      <div class="container">
        <div class="row">
          <div class="col-lg-8">
            <div class="intro-excerpt">
              <div class="order-info">
                <div class="row">
                  <div class="col-lg-6">
                    <h2 style="font-size: 30px">
                      Order ID: <%= order.orderId %>
                    </h2>
                  </div>
                  <div class="col-lg-6">
                    <div class="btn-action text-md-end">
                      <a
                        href="/download-invoice/<%= order.orderId %>"
                        style="background-color: #efeeee; color: #3b5d50"
                        href="#"
                        class="btn btn-primary"
                        >Download Invoice</a
                      >
                    </div>
                  </div>
                </div>

                <p><strong>Payment Method:</strong> <%=order.paymentMethod%></p>
                <p>
                  <strong>Ordered On:</strong><%=
                  order.createdAt.toLocaleString('en-US', { month: 'short', day:
                  'numeric', year: 'numeric' })%>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      style="
        background-color: #efeeee;
        border: solid #3b5d50;
        border-radius: 50px;
        margin-bottom: 10px;
        margin-top: 1px;
      "
      class="container order-details"
    >
      <div class="row">
        <!-- Order Address Section (Add actual address data) -->
        <div style="color: #3b5d50; padding: 50px" class="col-md-6">
          <div class="order-address">
            <h3>Order Address</h3>
            <p style="font-size: 20px">
              <%=order.shippingAddress.fullname%><br /><%=order.shippingAddress.adname%>&nbsp;,&nbsp;<%=order.shippingAddress.street%><br /><%=order.shippingAddress.city%>&nbsp;,&nbsp;<%=order.shippingAddress.pincode%><br /><%=order.shippingAddress.phonenumber%>
            </p>

            <a href="#" class="btn btn-link">Edit Address</a>
          </div>
        </div>

        <!-- Order Tracking Section -->
        <div class="col-md-6">
          <div class="order-tracking">
            <h1>Order Status: <span id="orderStatus"></span></h1>
            <p>Updated at: <span id="updatedAt"></span></p>
            <div class="tracking-dots" id="trackingDots">
              <div class="dot" id="pendingDot" data-step="1"><p></p></div>
              <div class="dot" id="processingDot" data-step="2"><p></p></div>
              <div class="dot" id="shippedDot" data-step="3"><p></p></div>
              <div class="dot" id="deliveredDot" data-step="4"><p></p></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Items Section (Add actual order items data) -->
      <div class="order-items">
    <h3>Order Items</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Item Name</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Item Total</th>
            </tr>
        </thead>
        <tbody>
            <% order.items.forEach(item => { %>
                <tr>
                    <td><%= item.productName %></td>
                    <td><%= item.singleprice %></td>
                    <td><%= item.quantity %></td>
                    <td><%= item.price %></td>
                </tr>
            <% }); %>
        </tbody>
    </table>
</div>

<!-- Order Total Section (Add actual order total data) -->
<div class="order-total">
    <h2><strong>Total Amount:</strong> <%= order.totalPrice %></h2>
    <div style="margin-top: 30px; margin-bottom: 12px; margin-left: 500px">
        <% if (order.status !== 'Cancelled' && order.status !== 'Returned' && order.status !== 'Delivered') { %>
            <!-- Code to execute if the condition is true -->
            <a style="background-color: rgb(181, 0, 0); width: 350px" href="#" class="btn btn-danger" onclick="confirmCancel('<%= order._id %>')">Cancel</a>
        <% } else if (order.status === 'Delivered') { %>
            <!-- Code to execute if the condition is false -->
            <a style="background-color: rgb(198, 3, 3) (172, 53, 53)" href="/returnorder/<%= order._id %>" class="btn btn-danger">Return</a>
        <% } %>
        <% order.items.forEach(item => { %>
            <% if (item.status !== 'cancelled' && order.status == 'Delivered') { %>
                <a style="background-color: rgb(181, 0, 0); width: 350px" href="#" class="btn btn-danger" onclick="openModal('<%= item.productId %>')">Rate the product</a>
            <% } %>
        <% }); %>
    </div>

    <div class="modal" id="rateAndReviewModal" style="display: none;">
        <div class="modal-content" style="width: 30%;">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 style="text-align: center;">Rate and Review</h2>
            <form method="get" action="/rateAndReview" id="rateAndReviewForm">
                <div class="star-rating">
                    <input type="radio" id="star1" name="rating" value="1">
                    <label for="star1" onclick="handleRating(1)"></label>
                    <input type="radio" id="star2" name="rating" value="2">
                    <label for="star2" onclick="handleRating(2)"></label>
                    <input type="radio" id="star3" name="rating" value="3">
                    <label for="star3" onclick="handleRating(3)"></label>
                    <input type="radio" id="star4" name="rating" value="4">
                    <label for="star4" onclick="handleRating(4)"></label>
                    <input type="radio" id="star5" name="rating" value="5">
                    <label for="star5" onclick="handleRating(5)"></label>
                </div>
                <label for="review">Review:</label>
                <textarea id="review" name="review" rows="4" required></textarea>
                <input type="hidden" name="id" id="productIdInput" value="">
                <button type="submit" style="width: 100%;">Submit</button>
            </form>
        </div>
    </div>
</div>

    <footer>
      <!-- Footer Start-->
      <div class="footer-area footer-padding">
        <div class="container">
          <div class="row d-flex justify-content-between">
            <div class="col-xl-3 col-lg-3 col-md-5 col-sm-6">
              <div class="single-footer-caption mb-50">
                <div class="single-footer-caption mb-30">
                  <!-- logo -->
                  <div class="footer-logo">
                    <a href="index.html"
                      ><img src="user_assets/img/logo/logo2_footer.png" alt=""
                    /></a>
                  </div>
                  <div class="footer-tittle">
                    <div class="footer-pera">
                      <p>
                        Asorem ipsum adipolor sdit amet, consectetur adipisicing
                        elitcf sed do eiusmod tem.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-2 col-lg-3 col-md-3 col-sm-5">
              <div class="single-footer-caption mb-50">
                <div class="footer-tittle">
                  <h4>Quick Links</h4>
                  <ul>
                    <li><a href="#">About</a></li>
                    <li><a href="#"> Offers & Discounts</a></li>
                    <li><a href="#"> Get Coupon</a></li>
                    <li><a href="#"> Contact Us</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-4 col-sm-7">
              <div class="single-footer-caption mb-50">
                <div class="footer-tittle">
                  <h4>New Products</h4>
                  <ul>
                    <li><a href="#">Woman Cloth</a></li>
                    <li><a href="#">Fashion Accessories</a></li>
                    <li><a href="#"> Man Accessories</a></li>
                    <li><a href="#"> Rubber made Toys</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-5 col-sm-7">
              <div class="single-footer-caption mb-50">
                <div class="footer-tittle">
                  <h4>Support</h4>
                  <ul>
                    <li><a href="#">Frequently Asked Questions</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Report a Payment Issue</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <!-- Footer bottom -->
          <div class="row align-items-center">
            <div class="col-xl-7 col-lg-8 col-md-7">
              <div class="footer-copy-right">
                <p>
                  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                  Copyright &copy;
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  All rights reserved | This template is made with
                  <i class="fa fa-heart" aria-hidden="true"></i> by
                  <a href="https://colorlib.com" target="_blank">Colorlib</a>
                  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                </p>
              </div>
            </div>
            <div class="col-xl-5 col-lg-4 col-md-5">
              <div class="footer-copy-right f-right">
                <!-- social -->
                <div class="footer-social">
                  <a href="https://www.twiiter.com"
                    ><i class="fab fa-twitter"></i
                  ></a>
                  <a href="https://www.facebook.com/"
                    ><i class="fab fa-facebook-f"></i
                  ></a>
                  <a href="https://www.instagram.com"
                    ><i class="fab fa-instagram"></i
                  ></a>
                  <a href="#"><i class="fas fa-globe"></i></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Footer End-->
    </footer>
    <!--? Search model Begin -->
    <div class="search-model-box">
      <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-btn">+</div>
        <form class="search-model-form">
          <input
            type="text"
            id="search-input"
            placeholder="Searching key....."
          />
        </form>
      </div>
    </div>
   
    <script>
      function confirmCancel(orderId) {
        var confirmed = confirm("Are you sure you want to cancel this order?");
        if (confirmed) {
          window.location.href = "/cancelorder/" + orderId;
        }
      }
    </script>
    <script>
      function openModal(productId) {
    console.log(productId);
    document.getElementById('productIdInput').value = productId;

  document.getElementById('rateAndReviewModal').style.display = 'block';
}

function closeModal() {
  document.getElementById('rateAndReviewModal').style.display = 'none';
}
    </script>
    <script>
       // Get all star rating inputs
    const starInputs = document.querySelectorAll('.star-rating input');

// Add event listener to each input
starInputs.forEach(function (input) {
    input.addEventListener('click', function () {
        const clickedValue = parseInt(this.value);

        // Loop through all inputs and apply gold color to stars with values less than or equal to the clicked value
        starInputs.forEach(function (input) {
            const starValue = parseInt(input.value);
            const label = input.nextElementSibling; // Get the corresponding label

            if (starValue <= clickedValue) {
                label.style.color = 'gold';
            } else {
                label.style.color = '#ddd'; 
            }
        });
    });
});
    </script>
    <script src="./user_assets/js/vendor/modernizr-3.5.0.min.js"></script>
    <!-- Jquery, Popper, Bootstrap -->
    <script src="./user_assets/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="./user_assets/js/popper.min.js"></script>
    <script src="./user_assets/js/bootstrap.min.js"></script>
    <!-- Jquery Mobile Menu -->
    <script src="./user_assets/js/jquery.slicknav.min.js"></script>

    <!-- Jquery Slick , Owl-Carousel Plugins -->
    <script src="./user_assets/js/owl.carousel.min.js"></script>
    <script src="./user_assets/js/slick.min.js"></script>

    <!-- One Page, Animated-HeadLin -->
    <script src="./user_assets/js/wow.min.js"></script>
    <script src="./user_assets/js/animated.headline.js"></script>
    <script src="./user_assets/js/jquery.magnific-popup.js"></script>

    <!-- Scrollup, nice-select, sticky -->
    <script src="./user_assets/js/jquery.scrollUp.min.js"></script>
    <script src="./user_assets/js/jquery.nice-select.min.js"></script>
    <script src="./user_assets/js/jquery.sticky.js"></script>

    <!-- contact js -->
    <script src="./user_assets/js/contact.js"></script>
    <script src="./user_assets/js/jquery.form.js"></script>
    <script src="./user_assets/js/jquery.validate.min.js"></script>
    <script src="./user_assets/js/mail-script.js"></script>
    <script src="./user_assets/js/jquery.ajaxchimp.min.js"></script>

    <!-- Jquery Plugins, main Jquery -->
    <script src="./user_assets/js/plugins.js"></script>
    <script src="./user_assets/js/main.js"></script>
  </body>
</html>
