<!DOCTYPE html>
<html class="no-js" lang="zxx">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Watch shop | eCommers</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="manifest" href="site.webmanifest" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="user_assets/img/favicon.ico"
    />
    <!-- slider -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.3/tiny-slider.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.3/min/tiny-slider.js"></script>
    <!-- CSS here -->
    <link rel="stylesheet" href="user_assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="user_assets/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="user_assets\css\tiny-slider.css">
    <link rel="stylesheet" href="user_assets/css/flaticon.css" />
    <link rel="stylesheet" href="user_assets/css/slicknav.css" />
    <link rel="stylesheet" href="user_assets/css/animate.min.css" />
    <link rel="stylesheet" href="user_assets/css/magnific-popup.css" />
    <link rel="stylesheet" href="user_assets/css/fontawesome-all.min.css" />
    <link rel="stylesheet" href="user_assets/css/themify-icons.css" />
    <link rel="stylesheet" href="user_assets/css/slick.css" />
    <link rel="stylesheet" href="user_assets/css/nice-select.css" />
    <link rel="stylesheet" href="user_assets/css/style.css" />
    <style>
      .sliderimg{
		height: 37vw;
		object-fit: cover;
	}
    .category-options {
      display: none;
    }
     .animated {
      animation: bounce 1s infinite;
    }
    .popular-img img,
        .choice-watch-img img {
            height: 360px; 
            width: 379.98px; 
        }
        #container {
      margin-top: 50px;
    }

    .circular-buttons {
      text-align: center;
    }

    .circular-btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 50px;
		height: 50px;
		background-color: #ffffff;
		border-radius: 50%;
		margin: 0 10px;
		border: 2px solid #3b5d50;
		color: #3b5d50;
		font-size: 20px;
		text-decoration: none;
		transition: background-color 0.3s, color 0.3s;
    }

    .circular-btn:hover {
      background-color: #3b5d50;
      color: #ffffff;
    }

    .number-circle {
      width: 100px;
      height: 100px;
      background-color: #ffffff;
      border-radius: 50%;
      margin: 20px auto;
      border: 2px solid #3b5d50;
      color: #3b5d50;
      font-size: 24px;
      line-height: 100px;
      text-align: center;
      transition: background-color 0.3s, color 0.3s;
    }

    .number-circle:hover {
      background-color: #3b5d50;
      color: #ffffff;
    }
    #product-container {
  display: flex;
  flex-wrap: wrap;
}
    </style>
  </head>

  <body>
    <!--? Preloader Start -->
    <div id="preloader-active">
      <div class="preloader d-flex align-items-center justify-content-center">
        <div class="preloader-inner position-relative">
          <div class="preloader-circle"></div>
          <div class="preloader-img pere-text">
            <img src="user_assets/img/logo/logo.png" alt="img" />
          </div>
        </div>
      </div>
    </div>
    <!-- Preloader Start -->
    <header>
      <!-- Header Start -->
      <div class="header-area">
        <div class="main-header header-sticky">
          <div class="container-fluid">
            <div class="menu-wrapper">
              <!-- Logo -->
              <div class="logo">
                <a href="index.html"
                  ><img src="user_assets/img/logo/logo.png" alt=""
                /></a>
              </div>
              <!-- Main-menu -->
              <div class="main-menu d-none d-lg-block">
                <nav>
                  <ul id="navigation">
                    <li><a href="/">Home</a></li>

                    <!-- <li><a href="about.html">about</a></li> -->
                    <li class="hot">
                      <a href="/shop">shop</a>
                    </li>
                    <li>
                      <a href="#">Category</a>
                      <ul class="submenu">
                        <% categories.filter(category => category.status !==
                        false).forEach(category => { %>
                        <a
                          class="dropdown-item"
                          href="/shop?category=<%= category._id %>"
                        >
                          <%= category.name %>
                        </a>
                        <% }); %>
                      </ul>
                    </li>
                    <li><a href="contact.html">Contact</a></li>
                  </ul>
                </nav>
              </div>
              <!-- Header Right -->
              <div class="header-right">
                <ul>
                  <li>
                    <div class="search-bar">
                      <form action="/searchProducts" method="post">
                        <input
                          name="searchProducts"
                          type="text"
                          class="search-input"
                          placeholder="Search..."
                        />
                        <button class="search-button">
                          <img
                            src="/user_assets/img/adapt_icon/search-50.png"
                            style="height: 20px"
                          />
                        </button>
                      </form>
                    </div>
                  </li>
                  <li>
                    <a href="/profile"><span class="flaticon-user"></span></a>
                  </li>
                  <li>
                    <a href="/favouritespage">
                      <span class="flaticon-heart"></span
                    ></a>
                  </li>
                  <li>
                    <a href="/cartpage"
                      ><span class="flaticon-shopping-cart"></span
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
            <!-- Mobile Menu -->
            <div class="col-12">
              <div class="mobile_menu d-block d-lg-none"></div>
            </div>
          </div>
        </div>
      </div>
      <!-- Header End -->
    </header>
    <main>
      <!--? slider Area Start -->
      <div class="slider-area">
        <div class="slider-active">
          <!-- Single Slider -->
          <div
            id="carouselExampleIndicators"
            class="carousel slide"
            data-bs-ride="carousel"
          >
          <div id="carouselExampleIndicators" class="carousel slide" class="carousel-inner">
            <% banners.forEach(function(banner, index) { %>
              <% if (banner.active) { %>
                <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                  <a href="/bannerURL?id=<%= banner._id %>">
                    <img src="<%= banner.image.url %>" class="d-block w-100 sliderimg" alt="<%= banner.title %>">
                    <div class="carousel-caption d-none d-md-block" >
                      <h1 style="font-size: 120px;"><%= banner.title %></h1>
                      <h3><%= banner.subtitle %></h3>
                    </div>
                  </a>
                </div>
              <% } else { %>
                <!-- Add a default item or handle the case when banner is not active -->
                <div class="carousel-item">
                  <img src="path-to-default-image" class="d-block w-100 sliderimg" alt="Default Image">
                  <div class="carousel-caption d-none d-md-block" style="color: #fff;">
                    <h1 style="font-size: 120px;">Default Title</h1>
                    <h3>Default Subtitle</h3>
                  </div>
                </div>
              <% } %>
            <% }); %>
          </div>
          
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev" style="background-color: transparent; border-color: transparent">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next" style="background-color: transparent; border-color: transparent">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
          
          </div>

  
        </div>
      </div>
      <!-- slider Area End-->
      <!-- ? New Product Start -->
      <div class="popular-items section-padding30">
        <div class="container" id="productcontainer">
            <!-- Section title -->
            <div class="row justify-content-center">
                <div class="col-xl-7 col-lg-8 col-md-10">
                    <div class="section-tittle mb-70 text-center">
                        <h2>Newest Arrival</h2>
                        <p>Discover the Latest in Timepiece Elegance: New Arrivals!</p>
                    </div>
                </div>
            </div>
            <!-- Product display -->
            <div class="row">
                <% products.forEach(product => { %>
                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
                    <a href="/singleproduct/<%= product._id %>">
                        <div class="single-popular-items mb-50 text-center">
                            <div class="popular-img">
                                <% if (product.images && product.images.length > 0) { %>
                                <!-- Display the first image -->
                                <img src="<%= product.images[0] %>" alt="<%= product.name %>">
                                <% } else { %>
                                <!-- Display a placeholder image if no images are available -->
                                <img src="path/to/placeholder-image.jpg" alt="Placeholder Image">
                                <% } %>
                                <div class="img-cap">
                                    <span>Add to cart</span>
                                </div>
                                <div class="favorit-items">
                                    <span class="flaticon-heart"></span>
                                </div>
                            </div>
                            <div class="popular-caption">
                                <h3><%= product.name %></h3>
                                <span>Rs <%= product.price %></span>
                            </div>
                        </div>
                    </a>
                </div>
                <% }); %>
            </div>
        </div>
    </div>
    


    <div id="container">
      <div class="circular-buttons">
      <% if(currentPage > 1)	{ %>
        <a  class="circular-btn"  onclick="changePage('<%=currentPage%>',-1)"><i class="fas fa-angle-left"></i></a>
      <% } %>
        <div class="number-circle animated"><%=currentPage%></div>
      <% if(currentPage < totalPages) { %>
        <a  class="circular-btn" onclick="changePage('<%=currentPage%>',1)"><i class="fas fa-angle-right"></i></a>
      <% } %>
      </div>
      </div>
      <!-- Shop Method End-->
    </main>
    <footer>
      <!-- Footer Start-->
      <div class="footer-area footer-padding">
        <div class="container">
          <div class="row d-flex justify-content-between">
            <div class="col-xl-3 col-lg-3 col-md-5 col-sm-6">
              <div class="single-footer-caption mb-50">
                <div class="single-footer-caption mb-30">
                  <!-- logo -->
                  <div class="footer-logo">
                    <a href="index.html"
                      ><img src="user_assets/img/logo/logo2_footer.png" alt=""
                    /></a>
                  </div>
                  <div class="footer-tittle">
                    <div class="footer-pera">
                      <p>
                        Asorem ipsum adipolor sdit amet, consectetur adipisicing
                        elitcf sed do eiusmod tem.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-2 col-lg-3 col-md-3 col-sm-5">
              <div class="single-footer-caption mb-50">
                <div class="footer-tittle">
                  <h4>Quick Links</h4>
                  <ul>
                    <li><a href="#">About</a></li>
                    <li><a href="#"> Offers & Discounts</a></li>
                    <li><a href="#"> Get Coupon</a></li>
                    <li><a href="#"> Contact Us</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-4 col-sm-7">
              <div class="single-footer-caption mb-50">
                <div class="footer-tittle">
                  <h4>New Products</h4>
                  <ul>
                    <li><a href="#">Woman Cloth</a></li>
                    <li><a href="#">Fashion Accessories</a></li>
                    <li><a href="#"> Man Accessories</a></li>
                    <li><a href="#"> Rubber made Toys</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-5 col-sm-7">
              <div class="single-footer-caption mb-50">
                <div class="footer-tittle">
                  <h4>Support</h4>
                  <ul>
                    <li><a href="#">Frequently Asked Questions</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Report a Payment Issue</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <!-- Footer bottom -->
          <div class="row align-items-center">
            <div class="col-xl-7 col-lg-8 col-md-7">
              <div class="footer-copy-right">
                <p>
                  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                  Copyright &copy;
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  All rights reserved | This template is made with
                  <i class="fa fa-heart" aria-hidden="true"></i> by
                  <a href="https://colorlib.com" target="_blank">Colorlib</a>
                  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                </p>
              </div>
            </div>
            <div class="col-xl-5 col-lg-4 col-md-5">
              <div class="footer-copy-right f-right">
                <!-- social -->
                <div class="footer-social">
                  <a href="https://www.twiiter.com"
                    ><i class="fab fa-twitter"></i
                  ></a>
                  <a href="https://www.facebook.com/"
                    ><i class="fab fa-facebook-f"></i
                  ></a>
                  <a href="https://www.instagram.com"
                    ><i class="fab fa-instagram"></i
                  ></a>
                  <a href="#"><i class="fas fa-globe"></i></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Footer End-->
    </footer>
    <!--? Search model Begin -->
    <div class="search-model-box">
      <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-btn">+</div>
        <form class="search-model-form">
          <input
            type="text"
            id="search-input"
            placeholder="Searching key....."
          />
        </form>
      </div>
    </div>
    <!-- Search model end -->

   
    <!-- new -->
    <!-- Bootstrap CSS -->
<link href="path/to/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap JS -->
<script src="path/to/bootstrap.bundle.min.js"></script>


    <script src="./user_assets/js/vendor/modernizr-3.5.0.min.js"></script>

    <script>
			document.addEventListener('DOMContentLoaded', function () {
			  var slider = tns({
				container: '.category-slider',
				items: 3,
				axis: 'horizontal', 
				slideBy: 'page',
				autoplay: true, 
				nav: false,
				controls:false,
				autoplayButtonOutput: false 
			  });
			});
		  </script>
		<script src="js/bootstrap.bundle.min.js"></script>
		<script src="js/tiny-slider.js"></script>
		<script src="js/custom.js"></script>
		<script src="js/togglenav.js"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-GLhlTQ8iK1u6o9d6swnf7D90qwgwR4O/4XBDlB1Fm/E=" crossorigin="anonymous"></script>

	<script>
  document.addEventListener('DOMContentLoaded', function abcd() {
    new bootstrap.Carousel(document.getElementById('carouselExampleIndicators'), {
      interval: 5000, 
    });
  });
</script>

<!-- for pagination -->
<script>
  async function changePage(currentPage,action){
    try {
      const response = await fetch('/pagination',{
        method:'POST',
        headers:{
          'Content-type':'application/json'
        },
        body:JSON.stringify({
          currentPage,
          action
        })
      })

      const data = await response.json();

      if(data){
        updateProductContainer(data.products);
        updatePaginationContainer(data.currentPage,data.totalPages);
      }
    } catch (error) {
      console.log("error while fetching pagination data",error)
    }
  }


  function updateProductContainer(products) {
    const productContainer = document.getElementById("productcontainer");
    if (!productContainer) {
        console.error("Container element not found.");
        return;
    }

    productContainer.innerHTML = ""; 

    let row = document.createElement('div');
    row.classList.add('row');

    products.forEach(product => {
        const productHTML = `
            <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
                <a href="/singleproduct/${product._id}">
                    <div class="single-popular-items mb-50 text-center">
                        <div class="popular-img">
                            <img src="${product.images[0]}" alt="${product.name}">
                            <div class="img-cap">
                                <span>Add to cart</span>
                            </div>
                            <div class="favorit-items">
                                <span class="flaticon-heart"></span>
                            </div>
                        </div>
                        <div class="popular-caption">
                            <h3>${product.name}</h3>
                            <span>Rs ${product.price}</span>
                        </div>
                    </div>
                </a>
            </div>
        `;


        row.innerHTML += productHTML;

       
        if (row.children.length === 3) {
            productContainer.appendChild(row);
            row = document.createElement('div');
            row.classList.add('row');
        }
    });

   
    if (row.children.length > 0) {
        productContainer.appendChild(row);
    }
}


  function updatePaginationContainer(currentPage,totalPages){
    let values=document.getElementById('container');
    values.innerHTML=" ";
    const leftArrow = currentPage > 1
    ? `<a  class="circular-btn"  onclick="changePage('${currentPage}',-1)"><i class="fas fa-angle-left"></i></a>`
    : '';

    const rightArrow = currentPage < totalPages
? `<a  class="circular-btn" onclick="changePage('${currentPage}',1)"><i class="fas fa-angle-right"></i></a>`
: '';

  const paginationHTML = 
  `
    <div class="circular-buttons">
      ${leftArrow}
      <div class="number-circle animated">${currentPage}</div>
      ${rightArrow}
    </div>
  `;


  values.innerHTML += paginationHTML
    
  }
</script>
<!--  pagination ends -->



    <!-- Jquery, Popper, Bootstrap -->
    <script src="./user_assets/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="./user_assets/js/popper.min.js"></script>
    <script src="./user_assets/js/bootstrap.min.js"></script>
    <!-- Jquery Mobile Menu -->
    <script src="./user_assets/js/jquery.slicknav.min.js"></script>

    <!-- Jquery Slick , Owl-Carousel Plugins -->
    <script src="./user_assets/js/owl.carousel.min.js"></script>
    <script src="./user_assets/js/slick.min.js"></script>

    <!-- One Page, Animated-HeadLin -->
    <script src="./user_assets/js/wow.min.js"></script>
    <script src="./user_assets/js/animated.headline.js"></script>
    <script src="./user_assets/js/jquery.magnific-popup.js"></script>

    <!-- Scrollup, nice-select, sticky -->
    <script src="./user_assets/js/jquery.scrollUp.min.js"></script>
    <script src="./user_assets/js/jquery.nice-select.min.js"></script>
    <script src="./user_assets/js/jquery.sticky.js"></script>

    <!-- contact js -->
    <script src="./user_assets/js/contact.js"></script>
    <script src="./user_assets/js/jquery.form.js"></script>
    <script src="./user_assets/js/jquery.validate.min.js"></script>
    <script src="./user_assets/js/mail-script.js"></script>
    <script src="./user_assets/js/jquery.ajaxchimp.min.js"></script>

    <!-- Jquery Plugins, main Jquery -->
    <script src="./user_assets/js/plugins.js"></script>
    <script src="./user_assets/js/main.js"></script>
  </body>
</html>
